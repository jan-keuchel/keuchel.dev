<div id="toc-table">
    {%  if page.language == "en" %}
        <h2 class="no-toc">Contents</h2>
    {%  elsif page.language == "de" %}
        <h2 class="no-toc">Inhalt</h2>
    {% endif %}
    <ul id="toc-list"></ul>
</div>

<script>
    function generateTOC() {
        const headings = document.querySelectorAll("h2, h3, h4, h5, h6");
        const nestedList = document.getElementById("toc-list");

        headings.forEach((heading, index) => {
            if (heading.classList.contains("no-toc")) return;

            // Unique ID for each heading
            const headingId = "heading-" + index;
            heading.id = headingId;

            // Create list item
            const listItem = document.createElement("li");

            // Create anchor link
            const link = document.createElement("a");
            link.href = "#" + headingId;
            link.textContent = heading.textContent;

            // Add indentation based on heading level
            const level = parseInt(heading.tagName.charAt(1));
            listItem.style.marginLeft = (level - 2) * 20 + "px"; 

            // Append link to list item
            listItem.appendChild(link)
            nestedList.appendChild(listItem);
        });
    }

    // Call the function when the document is ready
    window.addEventListener("DOMContentLoaded", generateTOC);
</script>

